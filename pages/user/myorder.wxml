<!--pages/user/myorder.wxml-->
<loading hidden="{{hiddenLoading}}">正在加载</loading>
<view class='tab_ctr'>
    <view class='tab_ctt'>
        <view class="{{ order_type=='-1' ? 'tab_cell2' : 'tab_cell1' }}" bindtap="changeOrder" data-type="-1">全部</view>
        <view class="{{ order_type==0 ? 'tab_cell2' : 'tab_cell1' }}" bindtap="changeOrder" data-type="0">待付款</view>
        <view class="{{ order_type==1 ? 'tab_cell2' : 'tab_cell1' }}" bindtap="changeOrder" data-type="1">待发货</view>
        <view class="{{ order_type==2 ? 'tab_cell2' : 'tab_cell1' }}" bindtap="changeOrder" data-type="2">待收货</view>
        <view class="{{ order_type==3 ? 'tab_cell2' : 'tab_cell1' }}" bindtap="changeOrder" data-type="3">待评价</view>
    </view>
</view>
<view class="container">
    <view class='cells_ctr' wx:for="{{orderList}}" wx:key="key">
        <view class='cells_ctt'>
            订单号：{{item.order_sn}}
        </view>
        <navigator url='/pages/user/myorderdetail?id={{item.id}}' class='cells_ctt'>
            <view class='myorder_lctr'>
                <view wx:if="{{item.goods.length==1}}">
                    <view class='myorder_pic'><image mode='widthFix' src="{{item.goods[0]['pic']}}"/></view>
                    <view class='myorder_lctt'>
                        <view class='myorder_ltxt'>
                            <view class='myorder_goods_title'>{{item.goods[0]['title']}}</view>
                            <view class='myorder_goods_spec'>{{item.goods[0]['spec_item']}}</view>
                        </view>
                    </view>
                </view>
                <view wx:else>
                    <block wx:for="{{item.goods}}" wx:key="key">
                    <view class='myorder_pic' wx:if="{{index<3}}"><image mode='widthFix' src="{{item.pic}}"/></view>
                    </block>
                </view>
            </view>
            <view class='myorder_rctr'>
                <view class='myorder_rctt'>
                    <view>包裹1</view>
                    <view class="{{item.order_state=='交易成功' ? 'span2' : 'span1'}}">{{item.order_state}}</view>
                </view>
            </view>
        </navigator>
        <view class='cells_ctt border0'>
            <block wx:if="{{item.order_state=='已取消'}}">
                <view class='myorder_btn' bindtap="delOrder" data-id="{{item.id}}">删除订单</view>
            </block>
            <block wx:if="{{item.order_state=='待付款'}}">
                <view class='myorder_btn_on' bindtap="goPay" data-sn="{{item.order_sn}}">去付款</view>
                <view class='myorder_btn' bindtap="cancelOrder" data-id="{{item.id}}">取消订单</view>
            </block>
            <block wx:if="{{item.order_state=='待发货'}}">
                <button open-type="contact" class='myorder_btn'>提醒发货</button>
            </block>
            <block wx:if="{{item.order_state=='已发货'}}">
                <view class='myorder_btn_on' bindtap="shOrder" data-id="{{item.id}}">确认收货</view>
                <view class='myorder_btn' wx:if="{{item.send_type=='自提'}}">自提订单</view>
                <view class='myorder_btn' bindtap="showSend" data-id="{{item.id}}" wx:else>查看物流</view>
            </block>
            <block wx:if="{{item.order_state=='交易成功'}}">
                <view class='myorder_btn_on' bindtap="goComment" data-id="{{item.id}}">{{ item.is_comment=='0' ? '去评论' : '已评论' }}</view>
                <view class='myorder_btn' wx:if="{{item.send_type=='自提'}}">自提订单</view>
                <view class='myorder_btn' bindtap="showSend" data-id="{{item.id}}" wx:else>查看物流</view>
            </block>
        </view>
    </view>
    <block wx:if="{{orderList.length<1}}">
        <view class='none_ctr'><i class="iconfont icon-none"></i></view>
        <view class='none_txt'>暂无订单~</view>
    </block>
</view>
